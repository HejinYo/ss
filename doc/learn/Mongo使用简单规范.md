

[[toc]]



## 共同约束


- 命名约定为小写；
- 命名建议尽量短小达意；
- 不要使用系统保留关键字命名；
- 不建议使用任何"_"(下划线)外的特殊字符，以及数字打头或system打头命名；




## 库规范


- 数据库名最多为64字符；




## 集合规范


- 集合名称最多为64字符(含数据库前缀)，应尽量表达业务用途；
- 单库集合数不可过多，应在评估硬件以及业务行为做合理的拆分；
- 若评估相关集合较大，应考虑sharding，并设定合理的sharding key(若考虑联合索引超过两个字段，建议程序生成对应的hashid后使用该hashid进行分片)；




## 文档规范


- 文档中的_id键建议使用默认值；
- mongo大小写敏感，建议存放统一大小写后的数据；
- 建议不要存储大型对象，请将文档控制在16MB以内；
- 建议评估业务模式后谨慎选择内嵌或引用存储；




## 索引规范


- 遵循最左前缀原则；
- 禁止在数组字段上创建索引
- 索引字段唯一性应较高，在创建组合索引的时候，应评估索引中包含的字段，尽量将数据基数大(唯一值多的数据)的字段放在组合索引的前面；； 
- 索引字段要短，长度不要超过128字符；
- 创建索引要在后台创建，避免阻塞业务正常DML和查询；
- sharding表查询必须带上sharding key，若对其范围扫描可能存在性能隐患；


