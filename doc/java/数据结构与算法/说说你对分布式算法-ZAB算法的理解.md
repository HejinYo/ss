# 说说你对分布式算法 - ZAB算法的理解

ZAB算法是用于实现分布式系统中的原子广播的核心算法，它被广泛应用于ZooKeeper分布式协调服务中。
ZAB算法由两个主要阶段组成：**崩溃恢复阶段**和**消息广播阶段**。
在崩溃恢复阶段，当一个ZooKeeper节点启动或者领导者节点崩溃重启时，整个集群进入此阶段。**首先，**节点通过互相通信来选举出一个新的领导者，并将最新的数据状态发送给所有的跟随者节点，以确保数据的一致性。一旦恢复完成，集群进入下一个阶段。在消息广播阶段，领导者节点负责接收客户端的请求并将其转化为ZooKeeper事务。
**然后，**领导者使用ZAB算法将这些事务以广播的形式发送给所有的节点。每个节点按顺序执行这些事务，并向领导者节点发送确认消息。一旦领导者节点收到大多数节点的确认消息，就可以认为这些事务已经被提交。
**最后，**领导者将已提交的消息广播给所有节点，确保所有节点按照相同的顺序执行这些事务，从而实现数据的一致性和原子性。
ZAB算法的关键在于领导者选举和消息广播。领导者选举通过节点间的投票过程实现，节点通过互相通信来达成共识，并选出新的领导者。
消息广播则采用基于多数投票的确认机制，只有当超过半数的节点确认了事务才能认为这些事务已经被提交。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/ivmizlc6e7h50cfc>