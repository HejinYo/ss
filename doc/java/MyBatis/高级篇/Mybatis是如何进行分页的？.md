# Mybatis 是如何进行分页的？

MyBatis在数据库查询中执行分页操作时，通常会使用分页插件来处理。分页插件能够根据数据库的不同，生成适当的分页查询语句，并将查询结果进行分页处理。下面我将解释MyBatis如何进行分页以及分页插件的一般原理。
**MyBatis的分页原理**：

1.  **数据库方言(Dialect)**：不同的数据库（如MySQL、Oracle、SQL Server等）在分页查询语法上有所不同。MyBatis并不直接支持所有数据库的分页语法，而是通过数据库方言来处理。数据库方言是一个抽象层，它根据数据库类型生成相应的分页查询语句。 
2.  **参数传递**：在查询方法中，你可以传递分页相关的参数，如页码（pageNumber）和每页条数（pageSize）。 
3.  **分页处理**：MyBatis会根据数据库方言生成合适的分页查询语句，然后将查询结果返回给调用者。通常，MyBatis会添加类似`LIMIT`（对于MySQL）或`ROWNUM`（对于Oracle）等语句来限制返回的结果行数。 

**分页插件的原理**：
分页插件是一种扩展机制，它允许MyBatis在查询过程中，自动应用分页逻辑而不需要手动编写分页查询语句。分页插件的一般原理如下：

1.  **拦截器(Interceptor)**：分页插件实际上是MyBatis的一个拦截器，它可以在查询被执行之前或之后进行干预。 
2.  **处理分页逻辑**：在查询执行之前，分页插件会检测是否有分页参数传入。如果有分页参数，插件会根据数据库方言生成适当的分页查询语句。 
3.  **修改查询参数**：插件会修改查询的SQL语句，添加分页的限制条件。同时，它还会修改参数对象，将分页参数替换为实际的分页偏移量（offset）和每页条数（limit）。 
4.  **执行查询**：修改后的查询语句被执行，得到查询结果。 
5.  **封装分页结果**：插件会根据查询结果和分页参数，将查询结果进行切割，得到分页后的结果。 

分页插件的使用可以大大简化代码，使得在查询中不必关注分页逻辑，只需传递分页参数即可。一些常用的分页插件包括MyBatis-Paginator、PageHelper等，它们都基于上述原理来实现分页功能。不同的插件可能有不同的配置方式和特性，具体的使用方法和配置请参考各个插件的文档。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/gqenm8humo2qc0ha>