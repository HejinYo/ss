# 讲讲MyBatis中二级缓存的缺点？

二级缓存主要用来加速数据的访问。比如说，我们要从数据库中获取一些数据，但是每次都直接去数据库查询会有点慢，这时候二级缓存就能派上用场。它会把之前查询过的结果存起来，下次如果还需要同样的数据，就可以直接从缓存里拿，这样就不用再去数据库那里查询了。这样做的好处就是，我们能减少对数据库的频繁访问，提升应用程序的运行速度。

不过呢，二级缓存也有一些问题，咱们得注意一下。

首先，可能会出现数据不一致的问题。因为如果我们在一个地方改了数据，但是缓存里的数据没有及时更新，其他地方拿到的数据就可能是过时的，这样就可能引发错误。

其次，使用二级缓存需要一些内存空间来存储缓存数据。如果我们的数据很多，就可能占用比较多的内存，这有可能会影响到应用程序的运行速度。

还有，维护成本也是个问题。我们得考虑缓存数据什么时候该更新、什么时候该删除等等。这会让代码变得复杂，可能需要更多的开发和测试工作。

但是，二级缓存也有它适用的场景。

比如说，如果我们的应用程序更多是读取数据，写操作相对较少，那么二级缓存就能够很有效地减少数据库访问的次数，提升性能。

还有，如果我们的数据变化不是很频繁，即使缓存里的数据不是最新的，也不会对应用产生太大的影响，这时候也可以考虑用二级缓存。

另外，如果某些查询的耗时比较长，但是查询结果又不怎么变化，用了二级缓存就可以加快这些查询的速度。

当然，也有些情况下我们最好不要用二级缓存。

如果我们的应用程序对数据的实时性要求很高，二级缓存可能就不太适合，因为缓存里的数据可能会有点滞后。

还有，如果我们应用里有很多频繁的写操作，可能会导致缓存一直失效，这样就得不偿失了，可能还会增加数据库的压力。

最后，如果涉及到复杂的数据模型或者数据之间的关联关系，使用缓存的维护和数据一致性可能会变得更加复杂。

所以，考虑是否要用二级缓存的时候，我们需要综合考虑应用程序的性能需求、数据变化的频率以及数据一致性的要求等等因素。有时候，我们可以把二级缓存当作提升性能的一个工具，但也要小心使用，避免引入新的问题。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/aex0mfigrga4llrm>