# 说说你对Redis操作原子性的理解

Redis 的操作是原子性的，这是因为 Redis 的每个命令都是以单线程的方式执行的，整个命令的执行过程是不可中断的，要么全部执行成功，要么全部执行失败。
在 Redis 中，每个命令都会被转换成一个或多个底层操作，这些操作会基于数据结构的特定实现来执行。比如，对于字符串类型，获取一个键值对、设置一个键值对等操作都是原子性的。在执行这些底层操作时，Redis 会使用一些技术来保证原子性，主要包括以下两点：

1. Redis 使用单线程模型，避免了多线程之间的竞争条件和锁开销，从而保证了操作的原子性。
2. Redis 在执行一些复杂的操作时，比如事务、Lua 脚本等，会将多个底层操作打包成一个原子性操作，这些底层操作要么全部执行成功，要么全部执行失败。在事务和 Lua 脚本中，Redis 同时支持回滚操作，即当一些命令执行成功，后面的命令出错时，Redis 可以自动撤销已经执行的命令。

因此，Redis 的操作是原子性的，这得益于 Redis 单线程模型和底层操作的实现方式。这种原子性操作保证了 Redis 能够提供高效和可靠的服务。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/xi4vefxh9b8r7h64>