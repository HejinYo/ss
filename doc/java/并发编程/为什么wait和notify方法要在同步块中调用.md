# 为什么 wait 和 notify 方法要在同步块中调用


当使用 wait() 和 notify() 方法时，需要将它们放在同步块内，这是因为：

1. **互斥性**： 多线程环境下，我们希望在同一时刻只有一个线程能够执行 wait()、notify() 或 notifyAll() 方法。使用同步块（synchronized）提供了这种互斥性，避免多线程并发修改的问题。
2. **上下文切换**： 当一个线程调用 wait() 时，它会暂时放弃执行权并释放对象的锁。如果不在同步块内调用 wait()，线程可能在不合适的时机被唤醒，导致混乱。同步块内的 wait() 确保线程在正确的上下文中被唤醒，可以继续执行并获取锁。
3. **安全性**： 如果不在同步块内使用 wait()、notify() 或 notifyAll()，多个线程可能同时访问和修改同一个共享对象的状态，可能引发竞态条件，导致程序行为不确定。同步块（synchronized）可以确保对这些方法的访问是原子的，避免了潜在的并发问题。

简而言之，将 wait() 和 notify() 方法包裹在同步块内，有助于确保线程间的协同和同步工作正确，避免了多线程问题，提高了程序的可靠性和安全性。



> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/mw8d3os8ky6qlml8>