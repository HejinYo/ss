# 说说你对JMM内存模型的理解

Java内存模型（JMM）是一种抽象的概念，用于描述在Java程序中，一组线程如何通过共享内存进行交互。JMM并不真实存在，它是一种规范，规定了程序中变量在内存中的访问方式。
在JMM中，内存主要划分为两种类型：**主内存和工作内存**。主内存存储了所有的对象实例和静态变量，而工作内存存储了每个线程的局部变量、栈中的部分区域以及寄存器的内容。
**JMM定义了一系列规则来规范线程之间的内存访问**。其中最重要的规则是：当一个线程想要访问一个共享变量的值时，它必须先将其本地内存中的值更新到主内存中，然后再从主内存中读取该变量的值。这个过程被称为“主内存的一致性”。
**JMM的作用主要是屏蔽底层硬件和操作系统的内存访问差异**，实现平台一致性，使得Java程序在不同平台下能达到一致的内存访问结果。同时，JMM也规范了JVM如何与计算机内存进行交互，从而保证并发程序的正确性和可靠性。
在实践中，为了更好地利用JMM，程序员需要了解一些内存访问的规则和约束。例如，JMM允许编译器对指令进行重排序，但这种重排序必须符合原子性、可见性和有序性等规则。此外，程序员还需要注意避免出现数据竞争和死锁等问题，这些问题可能会导致程序的正确性受到影响。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/mif500gkwpd4hngq>