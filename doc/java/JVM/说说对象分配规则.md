# 说说对象分配规则

在Java中，对象分配规则是关于如何为新对象分配内存的一套规则，以确保内存的有效使用和对象的**正确初始化**。以下是关于对象分配的主要规则：

1. **内存分配**：新对象通常在堆内存中分配内存空间。
2. **对象头**：在为对象分配内存空间后，Java虚拟机会为对象分配一个**对象头**。对象头包含了一些关于对象的**元信息**，如对象的**哈希码、锁状态、垃圾回收信息**等。
3. **零值初始化**：在对象内存分配后，所有的成员变量会被初始化为零值。具体的零值取决于变量的数据类型。例如，整数类型会初始化为0，布尔类型会初始化为false，对象引用会初始化为null。
4. **构造函数调用**：一旦对象内存分配和零值初始化完成，Java虚拟机会调用对象的构造函数。
5. **对象引用**：最后，**new** 关键字会返回对象的引用，将这个引用分配给一个变量，以便后续可以通过该变量访问对象的属性和方法。
6. **垃圾回收管理**：Java虚拟机会自动管理对象的内存。如果对象不再被引用，它会被标记为垃圾，并在适当的时机由垃圾回收器回收，释放占用的内存。

这些规则确保了对象在创建时的正确初始化和内存管理。对于程序员来说，最重要的是编写好构造函数以确保对象在创建后具有合适的初始状态，并且不忘记在不再需要对象时将引用置为null，以便垃圾回收器能够回收不再使用的对象。



> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/ri355483wrs69dyk>