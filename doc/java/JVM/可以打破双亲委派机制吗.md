# 可以打破双亲委派机制吗

双亲委派模型通常是由Java虚拟机本身实现和强制执行的，目的是确保类加载的安全性和唯一性。但在某些情况下，你可以通过编写自定义类加载器来打破双亲委派机制。这通常在以下情况下发生：

1. **加载非标准类文件**：如果你需要加载非标准的类文件，例如从数据库或网络中动态加载类，传统的双亲委派模型可能无法满足需求，因此你可能需要编写自己的类加载器。
2. **实现类隔离**：有时，你可能需要在同一个应用程序中加载多个版本的相同类，或者在不同的模块中加载相同的类，这时自定义类加载器可以帮助你实现类的隔离，防止类冲突。
3. **动态更新类**：一些应用程序需要在运行时动态更新类，这也可能需要绕过双亲委派模型，以便能够加载新版本的类。

要打破双亲委派模型，你需要编写自己的类加载器，并覆盖其**loadClass**方法。在这个方法中，你可以自行决定如何加载类，而不遵循双亲委派规则。通常，你会在自定义类加载器中实现类加载的逻辑，包括从文件系统、网络或其他来源加载类字节码，并使用**defineClass**方法将类定义加载到JVM中。
需要注意的是，打破双亲委派模型可能会引入类加载的不安全性和不稳定性，因此应该谨慎使用。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/eoeqgzkyw3c05wic>