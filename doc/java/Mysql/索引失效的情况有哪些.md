# 索引失效的情况有哪些

索引失效是指在使用索引进行查询时，索引无法发挥作用，导致查询性能下降。常见的导致索引失效的情况有以下几种：

1. **不满足索引列顺序**：如果查询条件中的列顺序与索引列的顺序不一致，索引可能无法被使用。例如，一个联合索引（A, B），如果查询条件只包含了B列而没有A列，那么这个索引就无法被利用。
2. **使用函数或表达式**：当查询条件中对索引列应用了函数、数学运算、类型转换等操作时，索引可能无法被使用。因为索引的创建是基于原始列值的，无法直接使用函数计算后的结果进行索引匹配。
3. **字符串比较问题**：对于字符串类型的索引列，使用了不符合索引规则的比较方式。
4. **数据类型不匹配**：当查询条件的数据类型与索引列的数据类型不匹配时，索引可能无法被使用。尤其是在进行隐式数据类型转换、不同字符集的比较或编码问题时，需要特别留意。
5. **数据量过小**：当表中的数据量较小时，MySQL可能会选择全表扫描而非使用索引，因为全表扫描的成本较低。这种情况下，索引可能无法发挥作用。
6. **使用了NOT、<>、OR等非优化的逻辑操作符**：这些逻辑操作符在查询条件中的使用会导致索引失效，因为它们无法充分利用索引的特性。

综上所述，我们要解决索引失效的问题，可以通过合理设计索引、优化查询语句以及避免索引失效的情况发生来提升查询性能。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/azdpa9ibwn27gzbn>