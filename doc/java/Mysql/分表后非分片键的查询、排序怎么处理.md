# 分表后非分片键的查询、排序怎么处理

在使用分表后，非分片键的查询和排序可以通过以下方式进行处理：

1. **联合查询：**如果需要执行涉及多个分表的查询，可以使用联合查询（UNION）或者连接查询（JOIN）来合并结果。将查询条件应用到对应的分表，然后将结果联合起来返回给用户。
2. **扫描所有分表：**如果查询涉及到的数据无法通过分片键进行过滤，那么可能需要扫描所有的分表来获取满足条件的数据。这样的查询会比较慢，因为需要访问所有的分表并合并结果，但在某些场景下是必要的。
3. **手动分页和排序：**如果需要对分表后的数据进行排序和分页，可以在每个分表上执行独立的排序和分页操作，然后将结果合并或者按需返回给用户。这需要在应用程序中进行额外的逻辑处理。
4. **使用全局索引：**如果有一些特定的查询需要在非分片键上执行，并且这些查询非常频繁，可以考虑创建全局索引。全局索引不关心分片键，而是在整个集群上创建索引，可以加速这类查询的执行速度。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/lk72ltf37te36x28>