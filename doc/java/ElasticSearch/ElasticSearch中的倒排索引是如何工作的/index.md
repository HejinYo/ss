# ElasticSearch中的倒排索引是如何工作的

倒排索引是ElasticSearch中一种用于全文搜索的数据结构。它与正排索引不同，正排索引是将文档按照词汇顺序组织，而倒排索引则是将词汇映射到包含该词汇的文档列表中。
在ElasticSearch中，倒排索引的创建过程如下：

1. 首先，文档需要经过Analyzer处理，将其拆分为一系列的词汇单元（例如单词或短语），这些词汇单元被称为term。
2. 然后，将这些term作为倒排索引的键，将包含该term的文档编号、词频等信息作为值，存储在倒排列表中。每个term都对应一个倒排列表，存储了包含该term的所有文档的信息。
3. 在查询时，用户输入的查询语句也需要经过相同的Analyzer处理，将其拆分为一系列的term。然后根据倒排索引，可以快速找到包含这些term的文档，并返回查询结果。

倒排索引的优点在于它可以在O(1)的时间内判断某个文档是否包含某个词，而且还可以基于词频、相关度等统计信息进行搜索结果排序。因此，倒排索引在全文搜索和信息检索中广泛应用，如搜索引擎、网站搜索、文本分类等场景中。


> 原文: <https://www.yuque.com/tulingzhouyu/db22bv/kz3x0guomqgsc3k0>